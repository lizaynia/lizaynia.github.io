<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Digital Valentine</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@500;700;900&display=swap');

        :root {
            --bg: #fff0f3;
            --text: #593d45;
            --accent: #ff4d6d;
            --grid-bg: rgba(255, 255, 255, 0.9);
            --word-found: #ff0040;
        }

        body {
            background-color: var(--bg);
            font-family: 'Outfit', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        input[type="checkbox"] {
            display: none;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(10, 50px);
            grid-gap: 10px;
            background: var(--grid-bg);
            padding: 40px;
            border-radius: 40px;
            box-shadow: 0 20px 40px rgba(255, 77, 109, 0.15);
            position: relative;
            /* Сетка исчезнет только через 5 секунд после победы */
            transition: opacity 1s ease 5s, transform 1s ease 5s;
            z-index: 5;
        }

        .grid span,
        .grid label {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 1.6rem;
            border-radius: 50%;
            user-select: none;
            transition: color 0.4s ease, transform 0.3s ease;
            position: relative;
            z-index: 2;
            color: #ff99c8;
        }

        .grid span:nth-child(3n+2),
        .grid label:nth-child(3n+2) {
            color: #a9def9;
        }

        .grid span:nth-child(3n+3),
        .grid label:nth-child(3n+3) {
            color: #ffbe0b;
        }

        input:checked+label {
            transform: scale(1.1);
        }

        /* Обводки слов */
        .word-highlight {
            position: absolute;
            border: 3px solid var(--word-found);
            border-radius: 30px;
            pointer-events: none;
            opacity: 0;
            z-index: 1;
            transition: opacity 0.5s ease, transform 0.5s ease;
            transform: scale(0.8);
        }

        .highlight-happy {
            top: 40px;
            left: 160px;
            width: 290px;
            height: 50px;
        }

        .highlight-valentines {
            top: 40px;
            left: 40px;
            width: 50px;
            height: 590px;
        }

        .highlight-day {
            top: 345px;
            left: 105px;
            width: 215px;
            height: 50px;
            transform: rotate(45deg) scale(0.8);
            transform-origin: 25px 25px;
        }

        .highlight-love {
            top: 105px;
            left: 405px;
            width: 300px;
            height: 50px;
            transform: rotate(45deg) scale(0.8);
            transform-origin: 25px 25px;
        }

        .highlight-my {
            top: 520px;
            left: 280px;
            width: 110px;
            height: 50px;
        }

        /* Логика активации (рамка + красный цвет) */
        body:has(#h1:checked):has(#h2:checked):has(#h3:checked):has(#h4:checked):has(#h5:checked) .highlight-happy {
            opacity: 1;
            transform: scale(1);
        }

        body:has(#h1:checked):has(#h2:checked):has(#h3:checked):has(#h4:checked):has(#h5:checked) label[for^="h"] {
            color: var(--word-found) !important;
        }

        body:has(#v1:checked):has(#v2:checked):has(#v3:checked):has(#v4:checked):has(#v5:checked):has(#v6:checked):has(#v7:checked):has(#v8:checked):has(#v9:checked):has(#v10:checked) .highlight-valentines {
            opacity: 1;
            transform: scale(1);
        }

        body:has(#v1:checked):has(#v2:checked):has(#v3:checked):has(#v4:checked):has(#v5:checked):has(#v6:checked):has(#v7:checked):has(#v8:checked):has(#v9:checked):has(#v10:checked) label[for^="v"] {
            color: var(--word-found) !important;
        }

        body:has(#d1:checked):has(#d2:checked):has(#d3:checked) .highlight-day {
            opacity: 1;
            transform: rotate(45deg) scale(1);
        }

        body:has(#d1:checked):has(#d2:checked):has(#d3:checked) label[for^="d"] {
            color: var(--word-found) !important;
        }

        body:has(#m1:checked):has(#m2:checked) .highlight-my {
            opacity: 1;
            transform: scale(1);
        }

        body:has(#m1:checked):has(#m2:checked) label[for^="m"] {
            color: var(--word-found) !important;
        }

        body:has(#l1:checked):has(#l2:checked):has(#l3:checked):has(#l4:checked) .highlight-love {
            opacity: 1;
            transform: rotate(45deg) scale(1);
        }

        body:has(#l1:checked):has(#l2:checked):has(#l3:checked):has(#l4:checked) label[for^="l"] {
            color: var(--word-found) !important;
        }

        /* Финальное сообщение */
        .victory-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            width: 90%;
            opacity: 0;
            pointer-events: none;
            z-index: 100;
            /* Появится через 6.5 секунд (5с задержка сетки + время на исчезновение) */
            transition: opacity 1.5s ease 6.5s;
        }

        .victory-word {
            font-size: 2.8rem;
            font-weight: 900;
            color: var(--word-found);
        }

        /* Условие победы (все слова найдены) */
        body:has(#h1:checked):has(#h2:checked):has(#h3:checked):has(#h4:checked):has(#h5:checked):has(#v1:checked):has(#v2:checked):has(#v3:checked):has(#v4:checked):has(#v5:checked):has(#v6:checked):has(#v7:checked):has(#v8:checked):has(#v9:checked):has(#v10:checked):has(#d1:checked):has(#d2:checked):has(#d3:checked):has(#m1:checked):has(#m2:checked):has(#l1:checked):has(#l2:checked):has(#l3:checked):has(#l4:checked) .grid {
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
        }

        body:has(#h1:checked):has(#h2:checked):has(#h3:checked):has(#h4:checked):has(#h5:checked):has(#v1:checked):has(#v2:checked):has(#v3:checked):has(#v4:checked):has(#v5:checked):has(#v6:checked):has(#v7:checked):has(#v8:checked):has(#v9:checked):has(#v10:checked):has(#d1:checked):has(#d2:checked):has(#d3:checked):has(#m1:checked):has(#m2:checked):has(#l1:checked):has(#l2:checked):has(#l3:checked):has(#l4:checked) .victory-container {
            opacity: 1;
            pointer-events: auto;
        }


        @keyframes heart-blast {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            65% {
                /* Active phase for approx 5s (of 8s total) */
                transform: translate(calc(-50% + var(--x) * 0.85), calc(-50% + var(--y) * 0.85)) rotate(var(--r)) scale(1.1);
                opacity: 1;
            }

            100% {
                /* Slow disappear phase */
                transform: translate(calc(-50% + var(--x)), calc(-50% + var(--y))) rotate(var(--r)) scale(1.2);
                opacity: 0;
            }
        }

        .hearts-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 200;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 30px;
            height: 30px;
            background-color: var(--accent);
            clip-path: path('M15 5.5 C15 5.5 10 0 5 0 C2.25 0 0 2.25 0 5 C0 10 15 25 15 25 C15 25 30 10 30 5 C30 2.25 27.75 0 25 0 C20 0 15 5.5 15 5.5 Z');
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
        }

        .heart:nth-child(4n+1) {
            background-color: #ff4d6d;
        }

        .heart:nth-child(4n+2) {
            background-color: #e01e43;
        }

        .heart:nth-child(4n+3) {
            background-color: #ffccd5;
        }

        .heart:nth-child(4n+0) {
            background-color: #fff0f3;
        }

        body:has(#h1:checked):has(#h2:checked):has(#h3:checked):has(#h4:checked):has(#h5:checked):has(#v1:checked):has(#v2:checked):has(#v3:checked):has(#v4:checked):has(#v5:checked):has(#v6:checked):has(#v7:checked):has(#v8:checked):has(#v9:checked):has(#v10:checked):has(#d1:checked):has(#d2:checked):has(#d3:checked):has(#m1:checked):has(#m2:checked):has(#l1:checked):has(#l2:checked):has(#l3:checked):has(#l4:checked) .heart {
            /* 
               Grid Disappearance: 5s delay + 1s transition = 6s total.
               We start the heart animation after 6s.
               Duration: 8s.
            */
            animation: heart-blast 8s ease-out forwards;
            animation-delay: calc(6s + var(--d));
            /* Use newly added --d var or just inline style */
        }
    </style>
</head>

<body>

    <input type="checkbox" id="h1"><input type="checkbox" id="h2"><input type="checkbox" id="h3"><input type="checkbox"
        id="h4"><input type="checkbox" id="h5">
    <input type="checkbox" id="v1"><input type="checkbox" id="v2"><input type="checkbox" id="v3"><input type="checkbox"
        id="v4"><input type="checkbox" id="v5"><input type="checkbox" id="v6"><input type="checkbox" id="v7"><input
        type="checkbox" id="v8"><input type="checkbox" id="v9"><input type="checkbox" id="v10">
    <input type="checkbox" id="d1"><input type="checkbox" id="d2"><input type="checkbox" id="d3">
    <input type="checkbox" id="m1"><input type="checkbox" id="m2">
    <input type="checkbox" id="l1"><input type="checkbox" id="l2"><input type="checkbox" id="l3"><input type="checkbox"
        id="l4">

    <div class="grid">
        <div class="word-highlight highlight-happy"></div>
        <div class="word-highlight highlight-valentines"></div>
        <div class="word-highlight highlight-day"></div>
        <div class="word-highlight highlight-my"></div>
        <div class="word-highlight highlight-love"></div>

        <label for="v1">V</label> <span>Q</span> <label for="h1">H</label> <label for="h2">A</label> <label
            for="h3">P</label> <label for="h4">P</label> <label for="h5">Y</label> <span>X</span> <span>O</span>
        <span>L</span>
        <label for="v2">A</label> <span>Z</span> <span>W</span> <span>K</span> <span>M</span> <span>J</span> <label
            for="l1">L</label> <span>U</span> <span>Y</span> <span>T</span>
        <label for="v3">L</label> <span>E</span> <span>R</span> <span>B</span> <span>I</span> <span>N</span>
        <span>G</span> <label for="l2">O</label> <span>S</span> <span>A</span>
        <label for="v4">E</label> <span>X</span> <span>P</span> <span>D</span> <span>T</span> <span>H</span>
        <span>C</span> <span>Q</span> <label for="l3">V</label> <span>F</span>
        <label for="v5">N</label> <span>O</span> <span>M</span> <span>U</span> <span>S</span> <span>A</span>
        <span>W</span> <span>K</span> <span>R</span> <label for="l4">E</label>
        <label for="v6">T</label> <label for="d1">D</label> <span>G</span> <span>Y</span> <span>J</span> <span>N</span>
        <span>B</span> <span>V</span> <span>C</span> <span>X</span>
        <label for="v7">I</label> <span>Z</span> <label for="d2">A</label> <span>Q</span> <span>L</span> <span>P</span>
        <span>O</span> <span>I</span> <span>U</span> <span>Y</span>
        <label for="v8">N</label> <span>T</span> <span>R</span> <label for="d3">Y</label> <span>E</span> <span>W</span>
        <span>Q</span> <span>A</span> <span>S</span> <span>D</span>
        <label for="v9">E</label> <span>F</span> <span>G</span> <span>H</span> <label for="m1">M</label> <label
            for="m2">Y</label> <span>J</span> <span>K</span> <span>L</span> <span>Z</span>
        <label for="v10">S</label> <span>X</span> <span>C</span> <span>V</span> <span>B</span> <span>N</span>
        <span>M</span> <span>Q</span> <span>W</span> <span>E</span>
    </div>

    <div class="victory-container">
        <div class="victory-word">Happy Valentines Day,</div>
        <div style="width: 100%"></div>
        <div class="victory-word">My Love!</div>
    </div>

    <div class="hearts-container">
        <div class="heart" style="--x: 10vw; --y: -40vh; --r: 10deg; --d: 0.1s;"></div>
        <div class="heart" style="--x: -20vw; --y: -30vh; --r: -20deg; --d: 0.3s;"></div>
        <div class="heart" style="--x: 30vw; --y: -20vh; --r: 45deg; --d: 0.5s;"></div>
        <div class="heart" style="--x: -40vw; --y: 10vh; --r: -10deg; --d: 0.2s;"></div>
        <div class="heart" style="--x: 15vw; --y: 35vh; --r: 60deg; --d: 0.6s;"></div>
        <div class="heart" style="--x: -10vw; --y: 25vh; --r: -30deg; --d: 0.4s;"></div>
        <div class="heart" style="--x: 40vw; --y: 5vh; --r: 15deg; --d: 0.7s;"></div>
        <div class="heart" style="--x: -35vw; --y: -15vh; --r: -5deg; --d: 0.2s;"></div>
        <div class="heart" style="--x: 5vw; --y: -45vh; --r: 25deg; --d: 0.5s;"></div>
        <div class="heart" style="--x: -25vw; --y: 40vh; --r: -60deg; --d: 0.3s;"></div>
        <div class="heart" style="--x: 25vw; --y: 15vh; --r: 80deg; --d: 0.6s;"></div>
        <div class="heart" style="--x: -5vw; --y: -25vh; --r: -15deg; --d: 0.1s;"></div>
        <div class="heart" style="--x: 45vw; --y: -10vh; --r: 30deg; --d: 0.8s;"></div>
        <div class="heart" style="--x: -45vw; --y: 30vh; --r: -45deg; --d: 0.4s;"></div>
        <div class="heart" style="--x: 20vw; --y: -35vh; --r: 50deg; --d: 0.5s;"></div>
        <div class="heart" style="--x: -15vw; --y: -10vh; --r: -25deg; --d: 0.3s;"></div>
        <div class="heart" style="--x: 35vw; --y: 30vh; --r: 10deg; --d: 0.7s;"></div>
        <div class="heart" style="--x: -30vw; --y: 20vh; --r: -35deg; --d: 0.2s;"></div>
        <div class="heart" style="--x: 0vw; --y: -50vh; --r: 0deg; --d: 0.6s;"></div>
        <div class="heart" style="--x: 0vw; --y: 50vh; --r: 90deg; --d: 0.6s;"></div>
    </div>
</body>

</html>
